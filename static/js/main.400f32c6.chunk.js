(this["webpackJsonpoptimhire-challenge-frontend"]=this["webpackJsonpoptimhire-challenge-frontend"]||[]).push([[0],{71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(36),s=a.n(n),l=a(17),i=a(3),o=a(2),u=a(0);function d(e){var t=e.children,a=e.className,r=e.backgroundColor,c=void 0===r?"bg-gray-700":r;return Object(u.jsx)("div",{className:"relative w-full h-auto max-w-md sm:max-w-2xl md:max-w-3xl lg:max-w-4xl p-8 rounded-lg shadow-2xl ".concat(c," ").concat(null!==a&&void 0!==a?a:""),children:t})}function j(e){var t=e.className,a=e.type,r=void 0===a?"text":a,c=e.title,n=e.value,s=e.onChange,l=e.disabled,i=void 0!==l&&l;return Object(u.jsxs)("div",{className:null!==t&&void 0!==t?t:"",children:[c&&Object(u.jsx)("div",{className:"text-gray-400 uppercase text-xs font-bold ml-3 mb-1",children:c}),Object(u.jsx)("input",{value:n,type:r,className:"bg-gray-400 rounded-xl p-2 w-full text-white focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:border-transparent",onChange:function(e){var t=e.target.value;return s(t)},autoComplete:"off",disabled:i})]})}function b(e){var t=e.className,a=e.title,r=e.onClick,c=e.type,n=void 0===c?"button":c,s=e.size,l=void 0===s?"w-full":s;return Object(u.jsx)("button",{className:"bg-yellow-300 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50 py-3 rounded-lg text-gray-600 font-bold uppercase mt-8 ".concat(t," ").concat(l),onClick:r,type:n,children:a})}function m(e){var t=e.title,a=void 0===t?"Error!":t,r=e.errors,c=void 0===r?[]:r;return 0===c.length?null:Object(u.jsxs)("div",{className:"absolute top-0 right-0 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-8",role:"alert",children:[Object(u.jsx)("p",{className:"font-bold",children:a}),Object(u.jsx)("ul",{className:"list-disc ml-4",children:c.map((function(e,t){return Object(u.jsx)("li",{children:e},t)}))})]})}var p=Object(r.createContext)({user:null,isUserLogged:function(){return!1},authenticate:function(e){},logout:function(){}}),x=p.Provider,f=function(e){var t=e.children,a=Object(r.useState)(null),c=Object(o.a)(a,2),n=c[0],s=c[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("user");null!==e&&s(JSON.parse(e))}),[]),Object(u.jsx)(x,{value:{user:n,isUserLogged:function(){return null!==localStorage.getItem("user")},authenticate:function(e){s(e),localStorage.setItem("user",JSON.stringify(e))},logout:function(){s(null),localStorage.removeItem("user")}},children:t})},v=function(){var e=Object(r.useContext)(p);if(!e)throw new Error("useAppContext must be used within a AppProvider");return e};function h(){var e=Object(i.f)(),t=v(),a=t.authenticate,c=t.logout,n=Object(r.useState)(""),s=Object(o.a)(n,2),l=s[0],p=s[1],x=Object(r.useState)(""),f=Object(o.a)(x,2),h=f[0],O=f[1],g=Object(r.useState)(""),y=Object(o.a)(g,2),N=y[0],w=y[1],C=Object(r.useState)(""),S=Object(o.a)(C,2),D=S[0],Y=S[1],k=Object(r.useState)([]),M=Object(o.a)(k,2),H=M[0],U=M[1];Object(r.useEffect)((function(){c()}),[c]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"flex items-center justify-center h-screen px-4",children:Object(u.jsxs)(d,{children:[Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsx)("div",{className:"absolute bg-gray-500 w-16 h-16 rounded-full -top-8"})}),Object(u.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 mt-4",children:[Object(u.jsx)(j,{title:"Name",value:l,onChange:p}),Object(u.jsx)(j,{title:"Lastname",value:h,onChange:O}),Object(u.jsx)(j,{type:"email",title:"Email",className:"sm:col-span-2",value:N,onChange:w}),Object(u.jsx)(j,{title:"Phone Number",type:"number",className:"sm:col-span-2",value:D,onChange:Y})]}),Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsx)(b,{className:"mt-8",size:"w-96",title:"Submit",onClick:function(){var t=[];l.length<3&&t.push("Name should have at least 3 characters"),h.length<3&&t.push("Lastname should have at least 3 characters"),function(e){return/\S+@\S+\.\S+/.test(e)}(N)||t.push("E-Mail format is invalid"),(D.length<6||isNaN(Number(D)))&&t.push("Phone number is invalid"),U(t),0===t.length&&(a({name:l,lastname:h,email:N,phoneNumber:Number(D)}),e.push("/cryptocurrencies"))}})})]})}),Object(u.jsx)(m,{errors:H})]})}var O=a(11),g=function(e){return function(t){var a=Object(i.f)(),c=v(),n=c.user,s=c.isUserLogged;return Object(r.useEffect)((function(){s()||a.push("/login")}),[a,s,n]),Object(u.jsx)(e,Object(O.a)({},t))}};function y(e){var t=e.children,a=e.className,c=e.tabs,n=Object(r.useState)(0),s=Object(o.a)(n,2),l=s[0],i=s[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"border-b-2 border-yellow-300 ".concat(a),children:Object(u.jsx)("ul",{className:"flex cursor-pointer",children:c.map((function(e,t){return Object(u.jsx)("li",{className:"py-1.5 px-6 bg-white rounded-t-xl ml-2 font-bold ".concat(l===t?"bg-yellow-300 text-gray-600":"bg-gray-100 text-gray-500 hover:bg-yellow-100"),onClick:function(){return i(t)},children:e},t)}))})}),t[l]]})}var N,w=a(24),C=Object(r.createContext)({results:[],lastCryptoValues:[],updateLastCryptoValues:function(){}}),S=C.Provider,D=function(e){var t=e.children,a=e.results,c=Object(r.useState)([]),n=Object(o.a)(c,2),s=n[0],l=n[1],i=Object(r.useState)([]),d=Object(o.a)(i,2),j=d[0],b=d[1];return Object(r.useEffect)((function(){var e=a.map((function(e,t){var a;return[].concat(Object(w.a)(e),Object(w.a)(null!==(a=s[t])&&void 0!==a?a:[]))}));l(e)}),[a]),Object(u.jsx)(S,{value:{results:s,lastCryptoValues:j,updateLastCryptoValues:function(e){b(e)}},children:t})},Y=function(){var e=Object(r.useContext)(C);if(!e)throw new Error("useCryptoCurrencyContext must be used within a CryptoCurrencyProvider");return e};function k(e){var t=e.cryptoCurrencyName,a=Y(),c=a.results,n=a.updateLastCryptoValues,s=Object(r.useMemo)((function(){return c.map((function(e){return e.filter((function(e){return e.name===t}))}))}),[t,c]),l=function(e){return e.toLocaleString("es-MX")};return Object(r.useEffect)((function(){n(s.map((function(e){var t=Object(o.a)(e,1)[0];return{provider:t.provider,value:t.value,name:t.name,lastUpdated:t.lastUpdated}})))}),[s]),Object(u.jsx)("div",{className:"py-4 select-none",children:Object(u.jsx)("div",{className:"grid sm:grid-cols-3 gap-4",children:s.map((function(e,t){var a=Object(o.a)(e,1)[0],r=a.provider,c=a.value;return Object(u.jsxs)(d,{backgroundColor:"bg-dark-500",className:"px-4 py-4",children:[Object(u.jsx)("div",{className:"text-yellow-300 font-bold text-2xl text-center",children:l(c)}),Object(u.jsx)("div",{className:"text-yellow-200 text-xs text-center uppercase",children:r}),Object(u.jsx)("div",{className:"w-full border border-yellow-400 my-4"}),Object(u.jsx)("div",{className:"h-32 overflow-y-auto",children:e.map((function(e,t){return Object(u.jsxs)("div",{className:"flex justify-between text-yellow-200 text-xs hover:text-yellow-400 cursor-pointer",children:[Object(u.jsx)("div",{children:e.lastUpdated}),Object(u.jsx)("div",{children:l(e.value)})]},t)}))})]},t)}))})})}!function(e){e.BTC="BTC",e.ETH="ETH",e.XRP="XRP"}(N||(N={}));var M=a(5),H=a.n(M),U=a(12),E=a(13),T=a.n(E),B=a(9),z=a.n(B);function P(){return L.apply(this,arguments)}function L(){return(L=Object(U.a)(H.a.mark((function e(){var t,a,r,c,n,s,l;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://api.coingecko.com/api/v3/coins/markets",{params:{vs_currency:"usd",ids:"bitcoin,ethereum,ripple"}});case 2:return t=e.sent,a=t.data,r=a,c=Object(o.a)(r,3),n=c[0],s=c[1],l=c[2],e.abrupt("return",[{name:N.BTC,value:n.current_price,lastUpdated:z()(n.last_updated).format("YYYY/MM/DD HH:mm:ss")},{name:N.ETH,value:s.current_price,lastUpdated:z()(s.last_updated).format("YYYY/MM/DD HH:mm:ss")},{name:N.XRP,value:l.current_price,lastUpdated:z()(l.last_updated).format("YYYY/MM/DD HH:mm:ss")}].map((function(e){return Object(O.a)(Object(O.a)({},e),{},{provider:"coingecko"})})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return X.apply(this,arguments)}function X(){return(X=Object(U.a)(H.a.mark((function e(){var t,a,r,c,n,s;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://public-api.stormgain.com/api/v1/ticker");case 2:return t=e.sent,a=t.data,c=(r=a).BTC_USDT,n=r.ETH_USDT,s=r.XRP_USDT,e.abrupt("return",[{name:N.BTC,value:parseFloat(c.last_price),lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.ETH,value:parseFloat(n.last_price),lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.XRP,value:parseFloat(s.last_price),lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")}].map((function(e){return Object(O.a)(Object(O.a)({},e),{},{provider:"storm-gain"})})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return I.apply(this,arguments)}function I(){return(I=Object(U.a)(H.a.mark((function e(){var t,a,r,c,n,s;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://min-api.cryptocompare.com/data/pricemulti",{params:{tsyms:"USD",fsyms:"BTC,ETH,XRP"}});case 2:return t=e.sent,a=t.data,c=(r=a).BTC,n=r.ETH,s=r.XRP,e.abrupt("return",[{name:N.BTC,value:c.USD,lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.ETH,value:n.USD,lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.XRP,value:s.USD,lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")}].map((function(e){return Object(O.a)(Object(O.a)({},e),{},{provider:"crypto-compare"})})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(!0),s=Object(o.a)(n,2),l=s[0],i=s[1],u=Object(r.useState)([]),d=Object(o.a)(u,2),j=d[0],b=d[1];return function(e){var t=e.callback,a=e.delay,c=Object(r.useRef)();Object(r.useEffect)((function(){c.current=t}),[t]),Object(r.useEffect)((function(){function e(){c.current()}if(e(),null!==a){var t=setInterval(e,a);return function(){return clearInterval(t)}}}),[a])}({callback:function(){var e=Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(null),e.next=4,Promise.all([P(),R(),_()]);case 4:t=e.sent,b(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(e.t0);case 11:return e.prev=11,l&&i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),delay:15e3}),[j,l,a]}var F=a(23),A=a.n(F);function J(){return Object(u.jsx)(F.SkeletonTheme,{color:"#6B7280",highlightColor:"#818896",children:Object(u.jsx)("div",{className:"grid sm:grid-cols-3 gap-4 py-3",children:Array(3).fill(null).map((function(e,t){return Object(u.jsx)(A.a,{count:1,className:"h-60"},t)}))})})}function W(e){var t=e.className;return Object(u.jsxs)(d,{backgroundColor:"bg-danger-300",className:"text-red-600 ".concat(t),children:[Object(u.jsx)("div",{className:"font-bold text-xl",children:"We apologize \ud83d\ude1e"}),Object(u.jsx)("div",{className:"font-light",children:"An error has occurred, please try again in a few minutes"})]})}function q(){var e=Y().lastCryptoValues,t=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(!0),s=Object(o.a)(n,2),l=s[0],i=s[1],u=Object(r.useState)(19.5),d=Object(o.a)(u,2),j=d[0],b=d[1];return Object(r.useEffect)((function(){!function(){var e=Object(U.a)(H.a.mark((function e(){var t,a,r,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(null),e.next=4,T.a.get("http://data.fixer.io/api/latest",{params:{access_key:"7cb238c0cb1f38b9eedec42a4aadc322",symbols:"USD,MXN"}});case 4:t=e.sent,a=t.data.rates,r=a.MXN,n=a.USD,b(n/r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:return e.prev=14,i(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}()()}),[]),[j,l,a]}(),a=Object(o.a)(t,3),c=a[0],n=a[1],s=(a[2],Object(r.useState)(void 0)),l=Object(o.a)(s,2),i=l[0],b=l[1];return Object(u.jsxs)(d,{className:"mt-4",backgroundColor:"bg-gray-600",children:[Object(u.jsx)("div",{className:"text-gray-400 uppercase text-lg font-bold mb-2",children:"Currency Converter"}),Object(u.jsxs)("div",{className:"grid sm:grid-cols-4 gap-4",children:[Object(u.jsx)(j,{value:i,onChange:b,title:"MXN",type:"number",disabled:n}),i&&i>0&&e.map((function(e,t){return Object(u.jsxs)("div",{className:"w-full break-all sm:text-center",children:[Object(u.jsx)("div",{className:"text-gray-400 uppercase text-xs font-bold mb-1",title:"CURRENT VALUE: ".concat(e.value.toString()),children:e.provider}),Object(u.jsx)("div",{className:"text-yellow-200 font-bold mt-3",children:i*c/e.value})]},t)}))]})]})}function G(e){var t=e.visible,a=e.title,r=e.subtitle,c=e.primaryButton,n=e.secondaryButton,s=e.icon;return t?Object(u.jsxs)("div",{className:"min-w-screen h-screen animated fadeIn faster fixed left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover px-4 sm:px-0",id:"modal-id",children:[Object(u.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),Object(u.jsx)("div",{className:"w-full  max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg  bg-white ",children:Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{className:"text-center p-5 flex-auto justify-center",children:[s&&Object(u.jsx)("div",{className:"flex justify-center",children:s}),Object(u.jsx)("h2",{className:"text-xl font-bold py-4 ",children:a}),r&&Object(u.jsx)("p",{className:"text-sm text-gray-500 px-8",children:r})]}),Object(u.jsxs)("div",{className:"p-3  mt-2 text-center space-x-4 md:block",children:[n&&Object(u.jsx)("button",{className:"mb-2 md:mb-0 bg-white px-5 py-2 text-xs shadow-sm font-medium tracking-wider border text-gray-600 rounded-full hover:shadow-lg hover:bg-gray-100 uppercase",onClick:n.action,children:n.title}),Object(u.jsx)("button",{className:"mb-2 md:mb-0 bg-yellow-400 border border-yellow-400 px-5 py-2 text-xs shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-yellow-500 uppercase",onClick:c.action,children:c.title})]})]})})]}):null}function K(e){var t=e.size,a=void 0===t?24:t;return Object(u.jsx)("svg",{className:"MuiSvgIcon-root jss117 MuiSvgIcon-fontSizeLarge",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",height:a,width:a,children:Object(u.jsx)("path",{d:"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})}function Q(){var e=v().logout,t=Object(r.useState)(!1),a=Object(o.a)(t,2),c=a[0],n=a[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"grid grid-cols-3 gap-1 w-20",children:[Object(u.jsx)("div",{className:"bg-red-400 w-6 h-6 rounded-full cursor-pointer",onClick:function(){return n(!0)}}),Object(u.jsx)("div",{className:"bg-yellow-300 w-6 h-6 rounded-full cursor-pointer opacity-50",title:"Disabled feature"}),Object(u.jsx)("div",{className:"bg-green-300 w-6 h-6 rounded-full cursor-pointer opacity-50",title:"Disabled feature"})]}),Object(u.jsx)(G,{visible:c,title:"Are you sure you want to leave?",subtitle:"Do you really want to logout from your account?",primaryButton:{title:"Logout",action:e},secondaryButton:{title:"Cancel",action:function(){return n(!1)}},icon:Object(u.jsx)(K,{size:50})})]})}function Z(e){var t=e.size,a=void 0===t?24:t,r=e.fill,c=void 0===r?"#6b7280":r;return Object(u.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 45.532 45.532",height:a,width:a,children:Object(u.jsx)("g",{fill:c,children:Object(u.jsx)("path",{d:"M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765 S35.34,0.001,22.766,0.001z M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53 c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012 c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592 c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z"})})})}function $(){var e=v().user,t=Object(r.useState)(!1),a=Object(o.a)(t,2),c=a[0],n=a[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsxs)("div",{className:"hidden sm:flex text-sm text-gray-400 capitalize",children:[Object(u.jsx)("div",{children:null===e||void 0===e?void 0:e.name}),Object(u.jsx)("div",{className:"ml-1",children:null===e||void 0===e?void 0:e.lastname})]}),Object(u.jsx)("div",{className:"ml-2 cursor-pointer",onClick:function(){return n(!0)},children:Object(u.jsx)(Z,{})})]}),Object(u.jsx)(G,{visible:c,title:"User Information",subtitle:Object(u.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[Object(u.jsxs)("div",{className:"flex items-center sm:col-span-2",children:[Object(u.jsx)("div",{className:"text-lg font-bold capitalize",children:null===e||void 0===e?void 0:e.name}),Object(u.jsx)("div",{className:"text-lg font-bold capitalize ml-1",children:null===e||void 0===e?void 0:e.lastname})]}),Object(u.jsx)("div",{className:"flex items-center",children:Object(u.jsx)("div",{className:"text-sm",children:null===e||void 0===e?void 0:e.email})}),Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("div",{children:"Phone:"}),Object(u.jsx)("div",{className:"ml-1",children:null===e||void 0===e?void 0:e.phoneNumber})]})]}),primaryButton:{title:"close",action:function(){return n(!1)}}})]})}function ee(){return Object(u.jsxs)("div",{className:"flex justify-between",children:[Object(u.jsx)(Q,{}),Object(u.jsx)($,{})]})}var te=[{path:"/login",component:h},{path:"/cryptocurrencies",component:g((function(){var e=V(),t=Object(o.a)(e,3),a=t[0],r=t[1],c=t[2],n=[N.BTC,N.ETH,N.XRP];return Object(u.jsx)(D,{results:a,children:Object(u.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:Object(u.jsxs)(d,{children:[Object(u.jsx)(ee,{}),c?Object(u.jsx)(W,{className:"mt-6"}):Object(u.jsx)(y,{className:"mt-6",tabs:n,children:n.map((function(e,t){return r?Object(u.jsx)(J,{},t):Object(u.jsx)(k,{cryptoCurrencyName:e},t)}))}),Object(u.jsx)(q,{})]})})})}))}];function ae(){return Object(u.jsx)(l.a,{children:Object(u.jsxs)(i.c,{children:[te.map((function(e){var t=e.path,a=e.component;return Object(u.jsx)(i.a,{path:t,exact:!0,component:a},t)})),Object(u.jsx)(i.a,{path:"/",component:h})]})})}a(71);function re(e){var t=e.children;return Object(u.jsx)("div",{className:"bg-yellow-100 w-full min-h-screen",children:t})}s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(f,{children:Object(u.jsx)(re,{children:Object(u.jsx)(ae,{})})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.400f32c6.chunk.js.map