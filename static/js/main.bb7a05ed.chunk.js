(this["webpackJsonpoptimhire-challenge-frontend"]=this["webpackJsonpoptimhire-challenge-frontend"]||[]).push([[0],{71:function(e,t,r){},72:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(36),s=r.n(a),l=r(17),i=r(3),o=r(2),u=r(0);function d(e){var t=e.children,r=e.className,c=e.backgroundColor,n=void 0===c?"bg-gray-700":c;return Object(u.jsx)("div",{className:"relative w-full h-auto max-w-md sm:max-w-2xl md:max-w-3xl lg:max-w-4xl p-8 rounded-lg shadow-2xl ".concat(n," ").concat(null!==r&&void 0!==r?r:""),children:t})}function j(e){var t=e.className,r=e.type,c=void 0===r?"text":r,n=e.title,a=e.value,s=e.onChange;return Object(u.jsxs)("div",{className:null!==t&&void 0!==t?t:"",children:[n&&Object(u.jsx)("div",{className:"text-gray-400 uppercase text-xs font-bold ml-3 mb-1",children:n}),Object(u.jsx)("input",{value:a,type:c,className:"bg-gray-400 rounded-xl p-2 w-full text-white focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:border-transparent",onChange:function(e){var t=e.target.value;return s(t)},autoComplete:"off"})]})}function b(e){var t=e.className,r=e.title,c=e.onClick,n=e.type,a=void 0===n?"button":n,s=e.size,l=void 0===s?"w-full":s;return Object(u.jsx)("button",{className:"bg-yellow-300 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50 py-3 rounded-lg text-gray-600 font-bold uppercase mt-8 ".concat(t," ").concat(l),onClick:c,type:a,children:r})}function m(e){var t=e.title,r=void 0===t?"Error!":t,c=e.errors,n=void 0===c?[]:c;return 0===n.length?null:Object(u.jsxs)("div",{className:"absolute top-0 right-0 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-8",role:"alert",children:[Object(u.jsx)("p",{className:"font-bold",children:r}),Object(u.jsx)("ul",{className:"list-disc ml-4",children:n.map((function(e,t){return Object(u.jsx)("li",{children:e},t)}))})]})}var p=Object(c.createContext)({user:null,isUserLogged:function(){return!1},authenticate:function(e){},logout:function(){}}),x=p.Provider,f=function(e){var t=e.children,r=Object(c.useState)(null),n=Object(o.a)(r,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("user");null!==e&&s(JSON.parse(e))}),[]),Object(u.jsx)(x,{value:{user:a,isUserLogged:function(){return null!==localStorage.getItem("user")},authenticate:function(e){s(e),localStorage.setItem("user",JSON.stringify(e))},logout:function(){s(null),localStorage.removeItem("user")}},children:t})},v=function(){var e=Object(c.useContext)(p);if(!e)throw new Error("useAppContext must be used within a AppProvider");return e};function h(){var e=Object(i.f)(),t=v(),r=t.authenticate,n=t.logout,a=Object(c.useState)(""),s=Object(o.a)(a,2),l=s[0],p=s[1],x=Object(c.useState)(""),f=Object(o.a)(x,2),h=f[0],O=f[1],g=Object(c.useState)(""),y=Object(o.a)(g,2),N=y[0],w=y[1],C=Object(c.useState)(""),S=Object(o.a)(C,2),Y=S[0],D=S[1],k=Object(c.useState)([]),H=Object(o.a)(k,2),M=H[0],U=H[1];Object(c.useEffect)((function(){n()}),[n]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"flex items-center justify-center h-screen px-4",children:Object(u.jsxs)(d,{children:[Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsx)("div",{className:"absolute bg-gray-500 w-16 h-16 rounded-full -top-8"})}),Object(u.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 mt-4",children:[Object(u.jsx)(j,{title:"Name",value:l,onChange:p}),Object(u.jsx)(j,{title:"Lastname",value:h,onChange:O}),Object(u.jsx)(j,{type:"email",title:"Email",className:"sm:col-span-2",value:N,onChange:w}),Object(u.jsx)(j,{title:"Phone Number",type:"number",className:"sm:col-span-2",value:Y,onChange:D})]}),Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsx)(b,{className:"mt-8",size:"w-96",title:"Submit",onClick:function(){var t=[];l.length<3&&t.push("Name should have at least 3 characters"),h.length<3&&t.push("Lastname should have at least 3 characters"),function(e){return/\S+@\S+\.\S+/.test(e)}(N)||t.push("E-Mail format is invalid"),(Y.length<6||isNaN(Number(Y)))&&t.push("Phone number is invalid"),U(t),0===t.length&&(r({name:l,lastname:h,email:N,phoneNumber:Number(Y)}),e.push("/cryptocurrencies"))}})})]})}),Object(u.jsx)(m,{errors:M})]})}var O=r(11),g=function(e){return function(t){var r=Object(i.f)(),n=v(),a=n.user,s=n.isUserLogged;return Object(c.useEffect)((function(){s()||r.push("/login")}),[r,s,a]),Object(u.jsx)(e,Object(O.a)({},t))}};function y(e){var t=e.children,r=e.className,n=e.tabs,a=Object(c.useState)(0),s=Object(o.a)(a,2),l=s[0],i=s[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"border-b-2 border-yellow-300 ".concat(r),children:Object(u.jsx)("ul",{className:"flex cursor-pointer",children:n.map((function(e,t){return Object(u.jsx)("li",{className:"py-1.5 px-6 bg-white rounded-t-xl ml-2 font-bold ".concat(l===t?"bg-yellow-300 text-gray-600":"bg-gray-100 text-gray-500 hover:bg-yellow-100"),onClick:function(){return i(t)},children:e},t)}))})}),t[l]]})}var N,w=r(24),C=Object(c.createContext)({results:[],lastCryptoValues:[],updateLastCryptoValues:function(){}}),S=C.Provider,Y=function(e){var t=e.children,r=e.results,n=Object(c.useState)([]),a=Object(o.a)(n,2),s=a[0],l=a[1],i=Object(c.useState)([]),d=Object(o.a)(i,2),j=d[0],b=d[1];return Object(c.useEffect)((function(){var e=r.map((function(e,t){var r;return[].concat(Object(w.a)(e),Object(w.a)(null!==(r=s[t])&&void 0!==r?r:[]))}));l(e)}),[r]),Object(u.jsx)(S,{value:{results:s,lastCryptoValues:j,updateLastCryptoValues:function(e){b(e)}},children:t})},D=function(){var e=Object(c.useContext)(C);if(!e)throw new Error("useCryptoCurrencyContext must be used within a CryptoCurrencyProvider");return e};function k(e){var t=e.cryptoCurrencyName,r=D(),n=r.results,a=r.updateLastCryptoValues,s=Object(c.useMemo)((function(){return n.map((function(e){return e.filter((function(e){return e.name===t}))}))}),[t,n]),l=function(e){return e.toLocaleString("es-MX")};return Object(c.useEffect)((function(){a(s.map((function(e){var t=Object(o.a)(e,1)[0];return{provider:t.provider,value:t.value,name:t.name,lastUpdated:t.lastUpdated}})))}),[s]),Object(u.jsx)("div",{className:"py-4 select-none",children:Object(u.jsx)("div",{className:"grid sm:grid-cols-3 gap-4",children:s.map((function(e,t){var r=Object(o.a)(e,1)[0],c=r.provider,n=r.value;return Object(u.jsxs)(d,{backgroundColor:"bg-dark-500",className:"px-4 py-4",children:[Object(u.jsx)("div",{className:"text-yellow-300 font-bold text-2xl text-center",children:l(n)}),Object(u.jsx)("div",{className:"text-yellow-200 text-xs text-center uppercase",children:c}),Object(u.jsx)("div",{className:"w-full border border-yellow-400 my-4"}),Object(u.jsx)("div",{className:"h-32 overflow-y-auto",children:e.map((function(e,t){return Object(u.jsxs)("div",{className:"flex justify-between text-yellow-200 text-xs hover:text-yellow-400 cursor-pointer",children:[Object(u.jsx)("div",{children:e.lastUpdated}),Object(u.jsx)("div",{children:l(e.value)})]},t)}))})]},t)}))})})}!function(e){e.BTC="BTC",e.ETH="ETH",e.XRP="XRP"}(N||(N={}));var H=r(8),M=r.n(H),U=r(12),E=r(14),T=r.n(E),B=r(9),z=r.n(B);function P(){return L.apply(this,arguments)}function L(){return(L=Object(U.a)(M.a.mark((function e(){var t,r,c,n,a,s,l;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://api.coingecko.com/api/v3/coins/markets",{params:{vs_currency:"usd",ids:"bitcoin,ethereum,ripple"}});case 2:return t=e.sent,r=t.data,c=r,n=Object(o.a)(c,3),a=n[0],s=n[1],l=n[2],e.abrupt("return",[{name:N.BTC,value:a.current_price,lastUpdated:z()(a.last_updated).format("YYYY/MM/DD HH:mm:ss")},{name:N.ETH,value:s.current_price,lastUpdated:z()(s.last_updated).format("YYYY/MM/DD HH:mm:ss")},{name:N.XRP,value:l.current_price,lastUpdated:z()(l.last_updated).format("YYYY/MM/DD HH:mm:ss")}].map((function(e){return Object(O.a)(Object(O.a)({},e),{},{provider:"coingecko"})})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return R.apply(this,arguments)}function R(){return(R=Object(U.a)(M.a.mark((function e(){var t,r,c,n,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://public-api.stormgain.com/api/v1/ticker");case 2:return t=e.sent,r=t.data,n=(c=r).BTC_USDT,a=c.ETH_USDT,s=c.XRP_USDT,e.abrupt("return",[{name:N.BTC,value:parseFloat(n.last_price),lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.ETH,value:parseFloat(a.last_price),lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.XRP,value:parseFloat(s.last_price),lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")}].map((function(e){return Object(O.a)(Object(O.a)({},e),{},{provider:"storm-gain"})})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return X.apply(this,arguments)}function X(){return(X=Object(U.a)(M.a.mark((function e(){var t,r,c,n,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://min-api.cryptocompare.com/data/pricemulti",{params:{tsyms:"USD",fsyms:"BTC,ETH,XRP"}});case 2:return t=e.sent,r=t.data,n=(c=r).BTC,a=c.ETH,s=c.XRP,e.abrupt("return",[{name:N.BTC,value:n.USD,lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.ETH,value:a.USD,lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")},{name:N.XRP,value:s.USD,lastUpdated:z()(new Date).format("YYYY/MM/DD HH:mm:ss")}].map((function(e){return Object(O.a)(Object(O.a)({},e),{},{provider:"crypto-compare"})})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(c.useState)(!0),s=Object(o.a)(a,2),l=s[0],i=s[1],u=Object(c.useState)([]),d=Object(o.a)(u,2),j=d[0],b=d[1];return function(e){var t=e.callback,r=e.delay,n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=t}),[t]),Object(c.useEffect)((function(){function e(){n.current()}if(e(),null!==r){var t=setInterval(e,r);return function(){return clearInterval(t)}}}),[r])}({callback:function(){var e=Object(U.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(null),e.next=4,Promise.all([P(),I(),_()]);case 4:t=e.sent,b(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:return e.prev=11,l&&i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),delay:15e3}),[j,l,r]}var F=r(23),A=r.n(F);function J(){return Object(u.jsx)(F.SkeletonTheme,{color:"#6B7280",highlightColor:"#818896",children:Object(u.jsx)("div",{className:"grid sm:grid-cols-3 gap-4 py-3",children:Array(3).fill(null).map((function(e,t){return Object(u.jsx)(A.a,{count:1,className:"h-60"},t)}))})})}function W(e){var t=e.className;return Object(u.jsxs)(d,{backgroundColor:"bg-danger-300",className:"text-red-600 ".concat(t),children:[Object(u.jsx)("div",{className:"font-bold text-xl",children:"We apologize \ud83d\ude1e"}),Object(u.jsx)("div",{className:"font-light",children:"An error has occurred, please try again in a few minutes"})]})}function q(){var e=D().lastCryptoValues,t=Object(c.useState)(void 0),r=Object(o.a)(t,2),n=r[0],a=r[1];return Object(u.jsxs)(d,{className:"mt-4",backgroundColor:"bg-gray-600",children:[Object(u.jsx)("div",{className:"text-gray-400 uppercase text-lg font-bold mb-2",children:"Currency Converter"}),Object(u.jsxs)("div",{className:"grid sm:grid-cols-4 gap-4",children:[Object(u.jsx)(j,{value:n,onChange:a,title:"MXN",type:"number"}),n&&n>0&&e.map((function(e,t){return Object(u.jsxs)("div",{className:"w-full break-all sm:text-center",children:[Object(u.jsx)("div",{className:"text-gray-400 uppercase text-xs font-bold mb-1",title:"CURRENT VALUE: ".concat(e.value.toString()),children:e.provider}),Object(u.jsx)("div",{className:"text-yellow-200 font-bold mt-3",children:(e.value*n).toFixed(2)})]},t)}))]})]})}function G(e){var t=e.visible,r=e.title,c=e.subtitle,n=e.primaryButton,a=e.secondaryButton,s=e.icon;return t?Object(u.jsxs)("div",{className:"min-w-screen h-screen animated fadeIn faster fixed left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover px-4 sm:px-0",id:"modal-id",children:[Object(u.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),Object(u.jsx)("div",{className:"w-full  max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg  bg-white ",children:Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{className:"text-center p-5 flex-auto justify-center",children:[s&&Object(u.jsx)("div",{className:"flex justify-center",children:s}),Object(u.jsx)("h2",{className:"text-xl font-bold py-4 ",children:r}),c&&Object(u.jsx)("p",{className:"text-sm text-gray-500 px-8",children:c})]}),Object(u.jsxs)("div",{className:"p-3  mt-2 text-center space-x-4 md:block",children:[a&&Object(u.jsx)("button",{className:"mb-2 md:mb-0 bg-white px-5 py-2 text-xs shadow-sm font-medium tracking-wider border text-gray-600 rounded-full hover:shadow-lg hover:bg-gray-100 uppercase",onClick:a.action,children:a.title}),Object(u.jsx)("button",{className:"mb-2 md:mb-0 bg-yellow-400 border border-yellow-400 px-5 py-2 text-xs shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-yellow-500 uppercase",onClick:n.action,children:n.title})]})]})})]}):null}function K(e){var t=e.size,r=void 0===t?24:t;return Object(u.jsx)("svg",{className:"MuiSvgIcon-root jss117 MuiSvgIcon-fontSizeLarge",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",height:r,width:r,children:Object(u.jsx)("path",{d:"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})}function Q(){var e=v().logout,t=Object(c.useState)(!1),r=Object(o.a)(t,2),n=r[0],a=r[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"grid grid-cols-3 gap-1 w-20",children:[Object(u.jsx)("div",{className:"bg-red-400 w-6 h-6 rounded-full cursor-pointer",onClick:function(){return a(!0)}}),Object(u.jsx)("div",{className:"bg-yellow-300 w-6 h-6 rounded-full cursor-pointer opacity-50",title:"Disabled feature"}),Object(u.jsx)("div",{className:"bg-green-300 w-6 h-6 rounded-full cursor-pointer opacity-50",title:"Disabled feature"})]}),Object(u.jsx)(G,{visible:n,title:"Are you sure you want to leave?",subtitle:"Do you really want to logout from your account?",primaryButton:{title:"Logout",action:e},secondaryButton:{title:"Cancel",action:function(){return a(!1)}},icon:Object(u.jsx)(K,{size:50})})]})}function Z(e){var t=e.size,r=void 0===t?24:t,c=e.fill,n=void 0===c?"#6b7280":c;return Object(u.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 45.532 45.532",height:r,width:r,children:Object(u.jsx)("g",{fill:n,children:Object(u.jsx)("path",{d:"M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765 S35.34,0.001,22.766,0.001z M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53 c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012 c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592 c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z"})})})}function $(){var e=v().user,t=Object(c.useState)(!1),r=Object(o.a)(t,2),n=r[0],a=r[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsxs)("div",{className:"hidden sm:flex text-sm text-gray-400 capitalize",children:[Object(u.jsx)("div",{children:null===e||void 0===e?void 0:e.name}),Object(u.jsx)("div",{className:"ml-1",children:null===e||void 0===e?void 0:e.lastname})]}),Object(u.jsx)("div",{className:"ml-2 cursor-pointer",onClick:function(){return a(!0)},children:Object(u.jsx)(Z,{})})]}),Object(u.jsx)(G,{visible:n,title:"User Information",subtitle:Object(u.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[Object(u.jsxs)("div",{className:"flex items-center sm:col-span-2",children:[Object(u.jsx)("div",{className:"text-lg font-bold capitalize",children:null===e||void 0===e?void 0:e.name}),Object(u.jsx)("div",{className:"text-lg font-bold capitalize ml-1",children:null===e||void 0===e?void 0:e.lastname})]}),Object(u.jsx)("div",{className:"flex items-center",children:Object(u.jsx)("div",{className:"text-sm",children:null===e||void 0===e?void 0:e.email})}),Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("div",{children:"Phone:"}),Object(u.jsx)("div",{className:"ml-1",children:null===e||void 0===e?void 0:e.phoneNumber})]})]}),primaryButton:{title:"close",action:function(){return a(!1)}}})]})}function ee(){return Object(u.jsxs)("div",{className:"flex justify-between",children:[Object(u.jsx)(Q,{}),Object(u.jsx)($,{})]})}var te=[{path:"/login",component:h},{path:"/cryptocurrencies",component:g((function(){var e=V(),t=Object(o.a)(e,3),r=t[0],c=t[1],n=t[2],a=[N.BTC,N.ETH,N.XRP];return Object(u.jsx)(Y,{results:r,children:Object(u.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:Object(u.jsxs)(d,{children:[Object(u.jsx)(ee,{}),n?Object(u.jsx)(W,{className:"mt-6"}):Object(u.jsx)(y,{className:"mt-6",tabs:a,children:a.map((function(e,t){return c?Object(u.jsx)(J,{},t):Object(u.jsx)(k,{cryptoCurrencyName:e},t)}))}),Object(u.jsx)(q,{})]})})})}))}];function re(){return Object(u.jsx)(l.a,{children:Object(u.jsxs)(i.c,{children:[te.map((function(e){var t=e.path,r=e.component;return Object(u.jsx)(i.a,{path:t,exact:!0,component:r},t)})),Object(u.jsx)(i.a,{path:"/",component:h})]})})}r(71);function ce(e){var t=e.children;return Object(u.jsx)("div",{className:"bg-yellow-100 w-full min-h-screen",children:t})}s.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(f,{children:Object(u.jsx)(ce,{children:Object(u.jsx)(re,{})})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.bb7a05ed.chunk.js.map